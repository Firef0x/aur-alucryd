# Maintainer: Alucryd <alucryd at gmail dot com>

pkgname="mpdris2-git"
pkgver=20130126
pkgrel=1
pkgdesc="MPRIS2 support for MPD"
arch=('any')
url="https://github.com/eonpatapon/mpDris2"
license=('GPL3')
depends=('mpd' 'python2-dbus' 'python2-gobject2' 'python2-mpd')
makedepends=('git' 'intltool')

_gitroot="https://github.com/eonpatapon/mpDris2.git"
_gitname="mpdris2"

build() {
  cd ${srcdir}

  msg "Connecting to the GIT server..."
  if [[ -d ${_gitname} ]] ; then
    cd ${_gitname}
    git pull origin
    msg "The local files are updated..."
  else
    git clone ${_gitroot} ${_gitname}
    cd ${_gitname}
  fi
  msg "GIT checkout done."

  ./autogen.sh
  ./configure --prefix=/usr --sysconfdir=/etc
  make
}

package() {
  cd "${srcdir}"/${_gitname}
  make DESTDIR="${pkgdir}" install

# Python 2 fix
  sed -i "s/python/python2/" "$pkgdir"/usr/bin/mpDris2
}

# vim: ts=2 sw=2 et:
