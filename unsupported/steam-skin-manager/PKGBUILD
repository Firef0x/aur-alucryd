# Maintainer: Alucryd <alucryd at gmail dot com>

pkgname=steam-skin-manager
pkgver=3.9.1
pkgrel=1
pkgdesc="GUI for Steam skins management"
arch=('i686' 'x86_64')
url="http://iubuntu.cz/Steam/"
license=('GPL3')
depends=('steam' 'qt>=4.7.0' 'qtwebkit')
install=${pkgname}.install
source=("${pkgname}-${pkgver}.deb::http://iubuntu.cz/Steam/steam-skin-installer.deb" 'steam-skin-manager.desktop' 'steam-wb.desktop')
sha256sums=('b9a949bef4a691db593ec135d8f05f58f9cff505f11ba50edd6e68a207d74c1b'
            'ec6fdcdfa6eb5483fd6e996a38cd89dd9dbac70c119cd764aa25e0da6e7d04e2'
            '55c6d96cf70bc853c8aebc173484889db87213939bcace74eb2a6c66eb388f90')

build() {
  cd ${srcdir}
  tar -xf data.tar.gz
  rm -rf usr/share/{applications/*,icons,pixmaps/steamwb.svg,steam}
  cp *.desktop usr/share/applications/
}

package() {
  cd ${srcdir}
  cp -dr --no-preserve=ownership usr "${pkgdir}"/

# Fix paths for i686
  if  [[ ${CARCH} == i686 ]] ; then
    mv "${pkgdir}"/usr/lib32 "${pkgdir}"/usr/lib
  fi

# Fix permissions
  find "${pkgdir}" -type d -exec chmod 755 {} +
  find "${pkgdir}" -type f -exec chmod 644 {} +
  chmod 755 "${pkgdir}"/usr/bin/{steam-{skin,wb},SteamSkinManager}
}

# vim: ts=2 sw=2 et:
